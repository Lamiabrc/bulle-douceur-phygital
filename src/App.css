/* =======================================================
   QVT Box – App Layer (poésie + fluidité + sobriété)
   Compatible Tailwind/Shadcn – sans override agressif
   ======================================================= */

/* ---------- Tokens mouvement & confort visuel ---------- */
:root {
  --ease-soft: cubic-bezier(.22, .61, .36, 1);   /* easeOutQuint-like */
  --ease-dream: cubic-bezier(.16, 1, .3, 1);     /* dreamy snap */
  --dur-fast: 160ms;
  --dur-med: 300ms;
  --dur-slow: 600ms;

  /* Glows doux */
  --shadow: 220 40% 2%;
  --shadow-card: 0 10px 30px hsl(var(--shadow) / .06), 0 2px 8px hsl(var(--shadow) / .04);

  /* Dégradé de héro (base) – utilise tes vars Tailwind/Shadcn */
  --gradient-hero: radial-gradient(1200px 600px at 10% -10%, hsl(var(--primary) / .10), transparent 60%),
                   radial-gradient(900px 480px at 90% -20%, hsl(var(--secondary) / .08), transparent 60%),
                   linear-gradient(180deg, hsl(var(--background)), hsl(var(--background)));
}

* { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
::selection { background: hsl(var(--primary) / .14); color: hsl(var(--primary-foreground)); }

/* Respect de l’accessibilité */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
}

/* ---------- Layout racine ---------- */
#root {
  min-height: 100dvh;
  isolation: isolate;
  display: flex;
  flex-direction: column;
}

/* ---------- Conteneur maîtrisé ---------- */
.container-pro {
  width: 100%;
  max-width: 1180px;
  margin-inline: auto;
  padding-inline: 1rem;
}
@media (min-width: 1024px) { .container-pro { padding-inline: 1.25rem; max-width: 1240px; } }
@media (min-width: 1280px) { .container-pro { padding-inline: 1.5rem;  max-width: 1320px; } }

/* ---------- Rythme vertical ---------- */
.section      { padding-block: 3.75rem; }
.section-sm   { padding-block: 2.25rem; }
.section-lg   { padding-block: 5.5rem; }
.section-hero { padding-block: 6.5rem; }

/* ---------- Typographie qui respire ---------- */
.prose-soft p { line-height: 1.75; letter-spacing: .005em; }
.prose-soft h1, .prose-soft h2 { letter-spacing: -.015em; }
.prose-soft small { opacity: .8; }

/* ---------- Hero atmosphérique ---------- */
.hero-surface {
  position: relative;
  background: var(--gradient-hero);
}
.dark .hero-surface {
  --gradient-hero: radial-gradient(1200px 600px at 10% -10%, hsl(var(--primary) / 0.16), transparent 60%),
                   radial-gradient(900px 480px at 90% -20%, hsl(var(--secondary) / 0.14), transparent 60%),
                   linear-gradient(180deg, hsl(var(--background)), hsl(var(--background)));
}
.hero-surface::after {
  content:"";
  position:absolute; inset:0;
  background: linear-gradient(to bottom, hsl(var(--background) / 0.55), transparent 35%, hsl(var(--background) / 0.25));
  pointer-events:none;
}

/* ---------- Cartes verre feutré ---------- */
.glass-card {
  background: linear-gradient(135deg, hsl(var(--card) / .78), hsl(var(--card) / .6));
  backdrop-filter: blur(10px);
  border: 1px solid hsl(var(--border) / .9);
  border-radius: var(--radius);
  box-shadow: var(--shadow-card);
  transition: transform var(--dur-med) var(--ease-soft), box-shadow var(--dur-med) var(--ease-soft);
}
.glass-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 16px 36px hsl(var(--shadow) / .08), 0 4px 10px hsl(var(--shadow) / .06);
}
.dark .glass-card {
  background: linear-gradient(135deg, hsl(var(--card) / .42), hsl(var(--card) / .28));
}

/* ---------- Bordure dégradée “bijou” ---------- */
.gradient-border {
  position: relative;
  border-radius: calc(var(--radius) + 2px);
  background:
    linear-gradient(hsl(var(--card)), hsl(var(--card))) padding-box,
    linear-gradient(135deg, hsl(var(--primary)), hsl(var(--secondary))) border-box;
  border: 2px solid transparent;
  box-shadow: 0 8px 28px hsl(var(--shadow) / .06);
}

/* ---------- Encarts douceur ---------- */
.soft-panel {
  background: hsl(var(--muted) / .6);
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius);
}

/* ---------- Boutons (complète Tailwind/shadcn) ---------- */
.btn-lg   { padding: .875rem 1.2rem; font-weight: 600; border-radius: calc(var(--radius) - 2px); }
.btn-xl   { padding: 1rem 1.45rem;  font-weight: 600; border-radius: calc(var(--radius) - 2px); }
.btn-pill { border-radius: 999px; }

button, .btn, [role="button"] {
  transition: transform var(--dur-fast) var(--ease-soft),
              box-shadow var(--dur-fast) var(--ease-soft),
              background var(--dur-fast) var(--ease-soft);
  will-change: transform;
}
button:hover, .btn:hover, [role="button"]:hover { transform: translateY(-1px); }
button:active, .btn:active, [role="button"]:active { transform: translateY(0); }

/* Boutons “bulles” si besoin */
.btn-bubble {
  background: radial-gradient(100% 100% at 50% 0%, hsl(var(--primary) / .18), hsl(var(--primary)));
  color: hsl(var(--primary-foreground));
  border-radius: 999px;
  padding: .8rem 1.2rem;
  box-shadow: 0 8px 24px hsl(var(--primary) / .25);
}
.btn-soft {
  background: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  color: hsl(var(--foreground));
  border-radius: 999px;
  padding: .8rem 1.2rem;
}

/* ---------- Liens vivants ---------- */
.link-quiet {
  color: hsl(var(--foreground) / .86);
  text-decoration: none;
  position: relative;
  transition: color var(--dur-fast) var(--ease-soft);
}
.link-quiet::after {
  content: "";
  position: absolute;
  left: 0; bottom: -2px;
  width: 0; height: 1.5px;
  background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--secondary)));
  transition: width var(--dur-med) var(--ease-dream);
}
.link-quiet:hover { color: hsl(var(--primary)); }
.link-quiet:hover::after { width: 100%; }

/* ---------- Tableaux sobres ---------- */
.table-pro {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius);
  overflow: hidden;
}
.table-pro thead th {
  text-align: left;
  font-weight: 600;
  font-size: .9rem;
  color: hsl(var(--muted-foreground));
  background: hsl(var(--muted) / .7);
  padding: .85rem 1rem;
  border-bottom: 1px solid hsl(var(--border));
}
.table-pro tbody td {
  padding: .85rem 1rem;
  border-bottom: 1px solid hsl(var(--border));
}
.table-pro tbody tr:last-child td { border-bottom: 0; }
.table-pro tbody tr:hover { background: hsl(var(--muted) / .4); }

/* ---------- Badges statut ---------- */
.badge {
  display: inline-flex; align-items: center; gap: .375rem;
  padding: .28rem .6rem;
  border-radius: 999px;
  font-size: .75rem; font-weight: 600;
  border: 1px solid transparent;
}
.badge-success { background: hsl(142 70% 45% / .12); color: hsl(142 72% 27%); border-color: hsl(142 50% 40% / .28); }
.badge-info    { background: hsl(var(--secondary) / .12); color: hsl(var(--secondary) / .9); border-color: hsl(var(--secondary) / .26); }
.badge-warn    { background: hsl(35 96% 55% / .12);  color: hsl(35 96% 34%);  border-color: hsl(35 90% 50% / .26); }
.badge-error   { background: hsl(var(--destructive) / .12); color: hsl(var(--destructive) / .9); border-color: hsl(var(--destructive) / .28); }

/* ---------- Étapes / tunnel ---------- */
.steps { display: grid; grid-auto-flow: column; gap: .75rem; align-items: center; }
.step-dot { width: 10px; height: 10px; border-radius: 999px; background: hsl(var(--muted-foreground) / .35); transition: all var(--dur-med) var(--ease-soft); }
.step-dot.is-active { background: hsl(var(--primary)); box-shadow: 0 0 0 6px hsl(var(--primary) / .12); transform: translateY(-1px); }
.step-connector { height: 2px; background: hsl(var(--border)); }

/* ---------- Animations reveal (discrètes) ---------- */
.reveal-up { opacity: 0; transform: translateY(10px); }
.reveal-up.is-inview { opacity: 1; transform: none; transition: opacity var(--dur-slow) var(--ease-dream), transform var(--dur-slow) var(--ease-dream); }
.reveal-fade { opacity: 0; }
.reveal-fade.is-inview { opacity: 1; transition: opacity var(--dur-slow) var(--ease-dream); }

/* ---------- Modales (overlay doux) ---------- */
.modal-overlay {
  position: fixed; inset: 0; backdrop-filter: blur(6px);
  background: hsl(var(--background) / .5);
  animation: overlayIn var(--dur-med) var(--ease-soft);
}
@keyframes overlayIn { from { opacity: 0 } to { opacity: 1 } }

/* ---------- Toasts (carte douce) ---------- */
.toast-card {
  background: linear-gradient(135deg, hsl(var(--card) / .88), hsl(var(--card) / .7));
  border: 1px solid hsl(var(--border));
  border-radius: calc(var(--radius) + 2px);
  box-shadow: var(--shadow-card);
}

/* ---------- Formulaires subtils ---------- */
.input-soft {
  background: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: calc(var(--radius) - 2px);
  transition: border-color var(--dur-fast) var(--ease-soft), box-shadow var(--dur-fast) var(--ease-soft);
}
.input-soft:focus {
  border-color: hsl(var(--primary));
  box-shadow: 0 0 0 4px hsl(var(--primary) / .12);
}
.textarea-soft { resize: vertical; min-height: 120px; }

/* ---------- Helpers responsive ---------- */
.hidden-mobile { display: none; }
@media (min-width: 768px) { .hidden-mobile { display: revert; } }

/* ---------- Impression épurée ---------- */
@media print {
  body { background: #fff !important; color: #000 !important; }
  .no-print { display: none !important; }
  .only-print { display: block !important; }
  a[href^="http"]:after { content: " (" attr(href) ")"; font-size: .8em; color: #555; }
}

/* ---------- Utilitaires fluides (optionnels) ---------- */
.shadow-floating { box-shadow: 0 16px 40px hsl(var(--shadow) / .10), 0 4px 16px hsl(var(--shadow) / .06); }
.shadow-primary  { box-shadow: 0 10px 32px hsl(var(--primary) / .25); }
.shadow-secondary{ box-shadow: 0 10px 32px hsl(var(--secondary) / .22); }
.shadow-glow     { box-shadow: 0 0 0 3px hsl(var(--primary) / .2), 0 14px 38px hsl(var(--primary) / .25); }

.animate-pulse-soft { animation: pulseSoft 2.6s var(--ease-soft) infinite; }
@keyframes pulseSoft { 0%, 100% { transform: translateZ(0) scale(1) } 50% { transform: translateZ(0) scale(1.02) } }

/* ---------- Nav/Bar (verre haut) ---------- */
.glass-effect {
  background: linear-gradient(180deg, hsl(var(--background) / .75), hsl(var(--background) / .45));
  backdrop-filter: blur(10px);
  border-bottom: 1px solid hsl(var(--border) / .7);
}

/* ---------- Encarts “Waaaw” dédiés (ex. Box Pouvoir d’Achat) ---------- */
.callout-hero {
  border-radius: 24px;
  padding: 1.25rem;
  background:
    linear-gradient(180deg, hsl(var(--background)), hsl(var(--background))) padding-box,
    linear-gradient(135deg, hsl(var(--primary) / .9), hsl(var(--secondary) / .9)) border-box;
  border: 2px solid transparent;
  box-shadow: 0 14px 38px hsl(var(--primary) / .2);
}

/* ---------- Grilles d’images (catalogue box) ---------- */
.img-card {
  position: relative;
  overflow: hidden;
  border-radius: 16px;
  box-shadow: var(--shadow-card);
}
.img-card img { transition: transform var(--dur-med) var(--ease-soft); }
.img-card:hover img { transform: scale(1.045); }
.img-card::after {
  content:""; position:absolute; inset:0; pointer-events:none;
  background: linear-gradient(180deg, transparent 40%, hsl(var(--background) / .65));
}

/* ---------- Helpers de titres ---------- */
.heading-underline {
  position: relative; display: inline-block; padding-bottom: .4rem;
}
.heading-underline::after {
  content:""; position:absolute; left: 50%; transform: translateX(-50%);
  bottom: 0; width: 64%; height: 2px;
  background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--secondary)));
  border-radius: 999px;
}
